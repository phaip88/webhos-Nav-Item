# ✅ Leapcell 部署检查清单

## 部署前检查

### 📁 项目文件
- [x] `app.js` - 主入口文件存在
- [x] `package.json` - 包含 start 脚本
- [x] `web/dist/` - 前端构建目录 (部署时生成)
- [x] `.gitignore` - Git 忽略文件配置

### 🔧 代码配置
- [x] `app.listen()` 监听 `0.0.0.0`
- [x] 使用 `process.env.PORT` 获取端口
- [x] 静态文件路径正确 (`web/dist`)
- [x] API 路由配置正确

## Leapcell 控制台配置

### 1️⃣ 基本设置
```
[ ] 项目名称: _____________ (自定义)
[ ] 运行时: Node.js
[ ] Node 版本: 18.x 或 20.x
```

### 2️⃣ 构建设置
```
[ ] 构建命令:
    npm install && cd web && npm install && npm run build

[ ] 启动命令:
    npm start
```

### 3️⃣ 环境变量 (必需)
```
[ ] ADMIN_USERNAME = _____________ (建议修改)
[ ] ADMIN_PASSWORD = _____________ (必须修改!)
[ ] JWT_SECRET = _________________ (建议修改)
[ ] NODE_ENV = production (可选)
```

### 4️⃣ 持久化卷配置
```
[ ] 卷 1: /app/database (数据库 - 必需)
[ ] 卷 2: /app/uploads (上传文件 - 推荐)
```

### 5️⃣ 健康检查 (可选)
```
[ ] 路径: / 或 /api/menus
[ ] 方法: GET
[ ] 超时: 30秒
```

## 部署后验证

### 🌐 访问测试
```
[ ] 首页访问正常
    URL: https://your-app.leapcell.io/
    预期: 显示导航卡片页面

[ ] 后台访问正常
    URL: https://your-app.leapcell.io/admin
    预期: 显示登录页面

[ ] API 响应正常
    URL: https://your-app.leapcell.io/api/menus
    预期: 返回 JSON 数据
```

### 🔐 功能测试
```
[ ] 后台登录功能正常
    用户名: [你配置的 ADMIN_USERNAME]
    密码: [你配置的 ADMIN_PASSWORD]

[ ] 菜单管理功能正常
[ ] 卡片管理功能正常
[ ] 上传图片功能正常
[ ] 数据持久化正常 (重启后数据保留)
```

### 📊 日志检查
```
[ ] 查看 Leapcell 日志面板
[ ] 确认启动日志: "server is running at http://0.0.0.0:<PORT>"
[ ] 无错误日志输出
```

## 安全检查

### 🔒 安全配置
```
[ ] 已修改默认管理员密码 (不是 123456)
[ ] 已设置强随机 JWT_SECRET
[ ] HTTPS 已启用 (Leapcell 通常自动提供)
[ ] 已测试后台登录安全性
```

## 性能优化 (可选)

### ⚡ 优化项
```
[ ] 配置 CDN 加速静态资源
[ ] 监控应用性能指标
[ ] 设置日志轮转
[ ] 配置自动扩容 (如支持)
```

## 故障排查

### ❌ 常见问题
```
问题 1: 构建失败
[ ] 检查构建日志
[ ] 确认 Node 版本正确
[ ] 确认 npm install 成功

问题 2: 启动失败
[ ] 检查启动命令
[ ] 确认 app.js 存在
[ ] 检查环境变量配置

问题 3: 页面空白
[ ] 确认前端构建成功
[ ] 检查 web/dist 目录存在
[ ] 查看浏览器控制台错误

问题 4: API 404
[ ] 确认路由配置正确
[ ] 检查后端日志
[ ] 测试 /api/menus 端点

问题 5: 数据丢失
[ ] 确认 /app/database 已挂载
[ ] 检查持久化卷配置
[ ] 验证数据库文件权限
```

## 📚 参考文档

- [x] DEPLOYMENT_SUMMARY.md - 部署总结
- [x] LEAPCELL_DEPLOYMENT.md - 详细部署指南
- [x] DEPLOYMENT_QUICK_REFERENCE.md - 快速参考
- [x] README.md - 项目说明

## 🎯 部署状态

```
部署日期: ___________
部署人员: ___________
应用 URL: ___________
部署状态: [ ] 成功  [ ] 失败
```

### 备注
```
___________________________________________
___________________________________________
___________________________________________
```

---

## ✨ 部署成功标准

✅ **所有检查项都已完成**
✅ **网站可以正常访问**
✅ **后台管理功能正常**
✅ **数据可以持久化保存**

---

📝 完成本清单后，您的应用应该已经成功部署在 Leapcell 平台！

💡 提示: 打印或复制本清单，在部署时逐项检查。
